
add_executable(TestDemo test_add.cpp)
target_link_libraries(TestDemo PRIVATE Add)

# GoogleTest requires at least C++17
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 导入测试框架，可选方法一
# 参考 https://cmake.com.cn/cmake/help/latest/module/FindGTest.html#module:FindGTest
find_package(GTest CONFIG REQUIRED)              # 导入GTest::gtest,GTest::gtest_main目标
target_link_libraries(TestDemo PRIVATE GTest::gtest GTest::gtest_main GTest::gmock GTest::gmock_main)

# 导入测试框架，可选方法二
# 参考 https://cmake.com.cn/cmake/help/latest/module/FetchContent.html#integrating-with-find-package
# include(FetchContent)            # 引入FetchContent_Declare,FetchContent_MakeAvailable方法
# message("gtesting loading")
# # FetchContent_Declare(            # 下载源代码
# #   googletest
# #   GIT_REPOSITORY https://github.com/google/googletest.git
# #   GIT_TAG        58d77fa8070e8cec2dc1ed015d66b454c8d78850 # release-1.12.1
# # )
# FetchContent_Declare(
#   googletest
#   URL https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip
# )
# message("gtesting active")
# # After the following call, the CMake targets defined by googletest
# # will be available to the rest of the build
# FetchContent_MakeAvailable(googletest) # 引入构建目标
# message("gtesting link")
# target_link_libraries(TestDemo PRIVATE gtest gtest_main)

# 导入用例识别方法
# 参考 https://cmake.com.cn/cmake/help/latest/module/GoogleTest.html#command:gtest_discover_tests
include(GoogleTest)            # 引入gtest_discover_tests方法
gtest_discover_tests(TestDemo) # 自动识别用例
