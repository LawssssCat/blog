cmake_minimum_required(VERSION 3.14.0)
project(HelloDemo VERSION 0.1.0 LANGUAGES CXX)

# 生成clangd提示
option(ENABLE_CLANGD_DATABASE '开启compile_command.json生成，引导clangd给出提示' ON)
if(ENABLE_CLANGD_DATABASE)
  message("enable clangd 'compile_command.json' generate")
  # 构建时生成compile_commands.json（重要）
  set(CMAKE_EXPORT_COMPILE_COMMANDS ON)
  file(WRITE ${CMAKE_CURRENT_SOURCE_DIR}/.clangd
  "CompileFlags:
    CompilationDatabase: ${CMAKE_CURRENT_BINARY_DIR}/")
endif()

add_executable(HelloDemo main.cpp)

# 三方件：fmt
find_package(fmt CONFIG REQUIRED)
target_link_libraries(HelloDemo PRIVATE fmt::fmt)

add_subdirectory(lib/sort)

# 测试开关
include(CTest)
if(BUILD_TESTING)
  message("enable build testing")
  enable_testing()
  add_subdirectory(tests)
endif()
