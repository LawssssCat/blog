import{_ as p,r as n,o as d,c as h,a as B,b as e,w as r,d as s,f as t,e as i}from"./app-z426IOai.js";const y={},E=s("p",null,"从驱动形式上，Thrift 提供的网络服务模型分为：单线程、多线程、时间驱动。",-1),A=s("p",null,"从另一个角度分为：阻塞服务模型、非阻塞服务模型。",-1),D=s("ul",null,[s("li",null,"阻塞服务模型： TSimpleServer, TThreadPoolServer"),s("li",null,"非阻塞服务模型： TNonblockingServer, THsHaServer, TThreadedSelectorServer")],-1),F=s("p",null,"下面以 Java 开发的角度分析各种网络服务模型的使用场景、性能情况。",-1),C=s("h2",{id:"tsimpleserver",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#tsimpleserver"},[s("span",null,"TSimpleServer")])],-1),v=s("p",null,"TSimpleServer 的工作模式采用最简单的阻塞 IO。其实现方法简洁明了，便于理解，但是一次只能接收和处理一个 Socket 连接，效率比较低。 它主要用于演示 Thrift 的工作过程，在实际开发工程中很少用到。",-1),m=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"SimpleService.java in server"},[s("pre",{class:"shiki shiki-themes github-light one-dark-pro",style:{"background-color":"#fff","--shiki-dark-bg":"#282c34",color:"#24292e","--shiki-dark":"#abb2bf"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"package"),s("span",{style:{color:"#24292E","--shiki-dark":"#C678DD"}}," org.example.service"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," com.example.thrift.UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.protocol.TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.server.TServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.server.TSimpleServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TServerSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TTransportException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.example.service.processor.UserServiceImpl"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," class"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#E5C07B"}}," SimpleService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"    public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," static"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," void"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," main"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#D73A49","--shiki-dark":"#E5C07B"}},"String"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"[] "),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}},"args"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},")"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"        try"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TServerSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," socket"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TServerSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#005CC5","--shiki-dark":"#D19A66"}},"19090"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 传输层")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        ){")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Factory"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," protocolFactory"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," TBinaryProtocol."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Factory"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 协议层")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Processor"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"<"),s("span",{style:{color:"#D73A49","--shiki-dark":"#E5C07B"}},"UserServiceImpl"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"> "),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}},"processor"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Processor"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"<>("),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," UserServiceImpl"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"()); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 处理层")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"            // 设置服务器参数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Args"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," serverArgs"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," TServer."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Args"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(socket); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 传输层")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            serverArgs"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"protocolFactory"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(protocolFactory); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 协议层")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            serverArgs"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"processor"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(processor); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 处理层")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"            // 启动服务器 （单线程，一般用于测试）")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TSimpleServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," server"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TSimpleServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(serverArgs);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            server"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"serve"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        } "),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"catch"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TTransportException"),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}}," e"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"            throw"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," RuntimeException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(e);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"    }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),u=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"SimpleClient.java in client"},[s("pre",{class:"shiki shiki-themes github-light one-dark-pro",style:{"background-color":"#fff","--shiki-dark-bg":"#282c34",color:"#24292e","--shiki-dark":"#abb2bf"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"package"),s("span",{style:{color:"#24292E","--shiki-dark":"#C678DD"}}," org.example.client"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," com.example.thrift.User"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," com.example.thrift.UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.TException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.protocol.TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.protocol.TProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TTransportException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," class"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#E5C07B"}}," SimpleClient"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"    public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," static"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," void"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," main"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#D73A49","--shiki-dark":"#E5C07B"}},"String"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"[] "),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}},"args"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},")"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"        String"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," host"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#032F62","--shiki-dark":"#98C379"}},' "localhost"'),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"        int"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," port"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#005CC5","--shiki-dark":"#D19A66"}}," 19090"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"        try"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," socket"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(host, port); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 传输层，阻塞io")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        ) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," protocol"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(socket); "),s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 协议层，二进制编码格式")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Client"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," client"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," UserService."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Client"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(protocol);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"            // Connect!")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            socket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"open"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"            try"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"                User"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," user"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," client"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"getById"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#005CC5","--shiki-dark":"#D19A66"}},"1"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"                System"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"out"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"println"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#032F62","--shiki-dark":"#98C379"}},'"user = "'),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," +"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," user);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"            } "),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"catch"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TException"),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}}," e"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"                throw"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," RuntimeException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(e);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"            }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        } "),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"catch"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TTransportException"),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}}," e"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"            throw"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," RuntimeException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(e);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"    }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),b=s("h2",{id:"tthreadpoolserver",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#tthreadpoolserver"},[s("span",null,"TThreadPoolServer")])],-1),g=s("p",null,"TThreadPoolServer 模式采用阻塞 Socket 方式工作，主线程负责阻塞式监听是否有新 Socket 到来，具体的业务处理交由一个线程池来处理。 （类似 nio）",-1),T=t('<p><strong>优点</strong></p><p>拆分了监听线程（Accept Thread）和处理客户端连接的工作线程（Worker Thread）。数据读取和业务处理都交给线程池处理。因此在存在并发时新连接也能够被及时接受。 （线程池模式比较适合用在服务器端能够预知客户端并发量的情况下，这时每个请求都能被业务线程池及时处理）</p><p><strong>缺点</strong></p><p>线程池模式的处理能力受限于线程池的工作能力，当并发请求数量大于线程池中的线程数量时，新请求也只能排队等待。 另外，默认线程池允许创建的最大线程数量为 <code>Intger.MAX_VALUE</code>，这可能会创建出大量线程，导致 OOM（内存溢出） 风险。</p><h2 id="tnonblockingserver" tabindex="-1"><a class="header-anchor" href="#tnonblockingserver"><span>TNonblockingServer</span></a></h2><p>TNonblockingServer 模式也是单线程工作，但是采用 NIO 模式，<mark>利用 IO 多路复用模型处理 Socket 就绪事件</mark>，对于有数据来到的 Socket 进行数据读取操作，对于有数据发送的 Socket 则进行数据发送操作，对于监听 Socket 则产生一个新业务 Socket 并将其注册到 Selector 上。</p>',6),S=s("div",{class:"hint-container note"},[s("p",{class:"hint-container-title"},"注"),s("p",null,"TNonblockingServer 要求底层的传输通道必须使用 TFramedTransport。")],-1),f=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"NonblockingService.java in server"},[s("pre",{class:"shiki shiki-themes github-light one-dark-pro has-highlighted",style:{"background-color":"#fff","--shiki-dark-bg":"#282c34",color:"#24292e","--shiki-dark":"#abb2bf"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"package"),s("span",{style:{color:"#24292E","--shiki-dark":"#C678DD"}}," org.example.service"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," com.example.thrift.UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.protocol.TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.server.TNonblockingServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TNonblockingServerSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TTransportException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.layered.TFramedTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.example.service.processor.UserServiceImpl"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," class"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#E5C07B"}}," NonblockingService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"    public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," static"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," void"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," main"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#D73A49","--shiki-dark":"#E5C07B"}},"String"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"[] "),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}},"args"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},")"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"        try"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TNonblockingServerSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," socket"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TNonblockingServerSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#005CC5","--shiki-dark":"#D19A66"}},"19090"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},")){")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Processor"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"<"),s("span",{style:{color:"#D73A49","--shiki-dark":"#E5C07B"}},"UserServiceImpl"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"> "),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}},"processor"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Processor"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"<>("),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," UserServiceImpl"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"());")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Factory"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," protocolFactory"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," TBinaryProtocol."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Factory"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"();")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TFramedTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Factory"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," transportFactory"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," TFramedTransport."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Factory"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(); ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"            // server")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TNonblockingServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Args"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," serverArgs"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," TNonblockingServer."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Args"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(socket);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            serverArgs"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"processor"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(processor);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            serverArgs"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"protocolFactory"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(protocolFactory);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            serverArgs"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"transportFactory"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(transportFactory);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TNonblockingServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," server"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TNonblockingServer"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(serverArgs);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            server"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"serve"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        } "),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"catch"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TTransportException"),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}}," e"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"            throw"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," RuntimeException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(e);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"    }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),w=s("div",{class:"language-java line-numbers-mode","data-ext":"java","data-title":"NonblockingClient.java in client"},[s("pre",{class:"shiki shiki-themes github-light one-dark-pro has-highlighted",style:{"background-color":"#fff","--shiki-dark-bg":"#282c34",color:"#24292e","--shiki-dark":"#abb2bf"},tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"package"),s("span",{style:{color:"#24292E","--shiki-dark":"#C678DD"}}," org.example.client"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," com.example.thrift.User"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," com.example.thrift.UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.TException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.protocol.TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.TTransportException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"import"),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," org.apache.thrift.transport.layered.TFramedTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," class"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#E5C07B"}}," NonblockingClient"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"    public"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," static"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," void"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," main"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#D73A49","--shiki-dark":"#E5C07B"}},"String"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"[] "),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}},"args"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},")"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"        String"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," host"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#032F62","--shiki-dark":"#98C379"}},' "localhost"'),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"        int"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," port"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#005CC5","--shiki-dark":"#D19A66"}}," 19090"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"        try"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," socket"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TSocket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(host, port)){")]),i(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TFramedTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," transport"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TFramedTransport"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(socket); ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," protocol"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," TBinaryProtocol"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(transport);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            UserService"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"Client"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," client"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," UserService."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"Client"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(protocol);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D","--shiki-dark":"#7F848E","font-style":"inherit","--shiki-dark-font-style":"italic"}},"            // Connect!")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"            socket"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"open"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"            try"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"                User"),s("span",{style:{color:"#24292E","--shiki-dark":"#E06C75"}}," user"),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," ="),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}}," client"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"getById"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#005CC5","--shiki-dark":"#D19A66"}},"1"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"                System"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"out"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"."),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}},"println"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"("),s("span",{style:{color:"#032F62","--shiki-dark":"#98C379"}},'"user = "'),s("span",{style:{color:"#D73A49","--shiki-dark":"#56B6C2"}}," +"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," user);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"            } "),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"catch"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TException"),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}}," e"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"                throw"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," RuntimeException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(e);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"            }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        } "),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"catch"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}}," ("),s("span",{style:{color:"#24292E","--shiki-dark":"#E5C07B"}},"TTransportException"),s("span",{style:{color:"#E36209","--shiki-dark":"#E06C75","font-style":"inherit","--shiki-dark-font-style":"italic"}}," e"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},") {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}},"            throw"),s("span",{style:{color:"#D73A49","--shiki-dark":"#C678DD"}}," new"),s("span",{style:{color:"#6F42C1","--shiki-dark":"#61AFEF"}}," RuntimeException"),s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"(e);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"        }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"    }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E","--shiki-dark":"#ABB2BF"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"})])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),x=t('<p><strong>优点</strong></p><p>相比 TSimpleServer 效率提升主要体现在 IO 多路复用上，TNonblockingServer 采用非阻塞 IO，对 accept/read/write 等 IO 事件进行监控和处理，同时监控多个 Socket 状态的变化。</p><p><strong>缺点</strong></p><p>TNonblockingServer 模式在业务处理上还是采用单线程顺序来完成。在业务处理比较复杂、耗时的时候效率不高，例如某些接口函数需要读取数据库执行时间较长，会导致整个服务器被阻塞。</p><h2 id="thshaserver" tabindex="-1"><a class="header-anchor" href="#thshaserver"><span>THsHaServer</span></a></h2><p>鉴于 TNonblockingServer 的缺点，THsHaServer 继承于 TNonblockingServer，引入了线程池提高了任务处理的并发能力。 （Reactor 模型）</p><div class="hint-container note"><p class="hint-container-title">注</p><p>THsHaServer 和 TNonblockingServer 一样，要求底层的传输通道必须使用 TFramedTransport。</p></div><blockquote><p>其他都一样，就是读 Socket 时的处理后面加了线程池。</p></blockquote>',8),U=t('<p><strong>优点</strong></p><p>THsHaServer 于 TNonblockingServer 模式相比，THsHaServer 在完成数据读取之后，将业务处理过程交给线程池处理，主线程直接返回进行下一个循环操作，效率大大提升。</p><p><strong>缺点</strong></p><p>主线程仍然需要完成所有 Socket 的监听接收、数据读取、数据写入操作。当并发请求数较大时，且发送数据量较多时，监听 Socket 上新连接请求不能被及时接受。</p><h2 id="tthreadedselectorserver" tabindex="-1"><a class="header-anchor" href="#tthreadedselectorserver"><span>TThreadedSelectorServer</span></a></h2><p>TThreadedSelectorServer 是对 THsHaServer 的一种补充。它将 Selector 中的读写 IO 事件（read/wirete）从主线程中分离出来。同时引入 Worker 工作线程池。</p><p>TThreadedSelectorServer 模式是目前 Thrift 提供的最高级的线程服务模型，它内部有如下几个部分构成：</p><ol><li>一个 AcceptThread 专门用于处理监听 Socket 上新的连接。</li><li>若干个 SelectorThread 专门用于处理业务 Socket 的网络 I/O 读写操作，所有网络数据的读写均是由这些线程来完成。</li><li>一个负载均衡器 SelectorThreadLoadBalancer 对象，主要用于 AcceptThread 线程接收一个新的 Socket 连接请求时，决定将这个新连接请求分配给哪个 SelectorThread 线程处理。</li></ol><blockquote><p>多个 Selector 的处理就很像 Tomcat7 中的处理。但 Tomcat8 中认为多个 Selector 对新能提升不大，所以在以后版本中又改回由一个 Selector 处理全部 IO。</p></blockquote>',9);function N(_,j){const k=n("Mermaid"),o=n("FlowChart"),c=n("Tabs");return d(),h("div",null,[E,A,D,F,B(" more "),e(k,{id:"mermaid-22",code:"eJzT1dXlKsksyUm1UgjJKMpMK1F4vnfi891znq1Y+HReNxdImis5J7G42CUzMb0oMZdLQQHMVQgJTi0qSy1SqAaKKCgUgzgamhB2SX4BlJlZDFKVmZcO5tcCMUybTY2uroJjUnFJUWJyiV9+XlJOfnI2UCFEGl1hSHBmbkFOKi7JxOIcwkYAvZeamBKQn58DVQBUgdMBUD3YTCWkB2JPakpwak5qckl+EcI2TOOgWjyKPRKhygCQW4or",title:"eJwLySjKTCtReL534vPdc56tWPh0XjcAZDELQg=="}),C,v,e(o,{id:"flowchart-29",code:"eJxVjsFKAzEURff5iixH6CzqsjD5Cb9gmkYd1GRIXhfuqhaR6iKiC62KKKJF1NGVAwr9mUkyn9E3HSh08xaX+849BhJmINXQo+5/5N7OiUiYkIMeDX9X/uGRqLybMJULnUKmJLZs4SazcHfp7AfdUnxPAOFKDhLW3Kwt+ZvC2Vd3dO8/n5GwuUZIORc50KocVeV7VU7d5ImaFmSGfVzDq9UQMilw7uvCn9l6frvqhumY6pzT+vskXM/q4tf/HLuXcbCnhBiIcakbL12WWtGhMB2qs51d2IiZaDOpOrSvANQBZqjXKEaroJGI9sV284AwsgCKWIGU",preset:"ant"}),e(c,{id:"30",data:[{id:"服务端"},{id:"客户端"}]},{title0:r(({value:l,isActive:a})=>[i("服务端")]),title1:r(({value:l,isActive:a})=>[i("客户端")]),tab0:r(({value:l,isActive:a})=>[m]),tab1:r(({value:l,isActive:a})=>[u]),_:1}),b,g,e(o,{id:"flowchart-44",code:"eJxVj89Og0AQh+88xR4xKQfqjQRewifY0tUSkd3A9uANtRptPWD0oKipGv8QY8WeJGLsy7BsfQt3F1PrZQ4zv/lmvojaTkRhSC3APmP2NNKQ7aCgawFentbXYw0T03YwQSGkHg5EKsnZMOOXJyx5AWvY3URUc3HQtR1ZvSZUn+cseWQ7V/XkThDa/wjQdRGhoCriqniuipQNb0HUgAj0xTUCQ+j7yLfAd5zy8QP/mPFsVE9v2OtxfZjM8/d6uiuzgvuX5ZMj9rXP7gc8OajKUlC1qN8ROFFD3KdegMT3DWF2sTjN0wEIiQvmb3v8LGvYDUTTImqIx01DqSlLfRtFLRB6Gz26Yjio6QW4BTqYUrwlesJWGuuLhnTSCaQ9s+WjdbkmkMpUddtLu1JJeanJ6tJEmui/6yr1AynRw4w=",preset:"ant"}),T,e(o,{id:"flowchart-63",code:"eJyNkUFOwkAUhvc9RZc1gUXbHUl7CU5Q2hEba4dMh6g7SBSNQqxBRRRjNIKJUYo7YzFehmlh5RWcTkE76YZNk2ne9733v+dhTfewgXBJJNMGeT4VgKXpwLVKYhx2o7t7QYA1WdNhDSAD29AtiWXgABNDJMa358R/FcvQ3AZYMKFLyeRrp3XRdUD8EWkOordHKlE4CceKZPIehy9MQcsyjlkYkpMHMm5Hxz51qJyDnF2Ro8+UzU6hyJLh2FW36II9rLlwg1MuBo35qCkapglqmDqxQuN59QqCdWy7IJ8vreQaKGs0QMCwmJ4myurnQUgHjy4nUWf8M22Tp4PYb80+bmjOVK6uId9FNgbMTleStZNWnxwOo25n9jUQAEIOrPIFi4v+PAii3pB89wTBw0W6UbnIWkj7wCsgu7qFN4o6sNg0kgsLFYgx3KH/6BGlvweblSEO2EwI6kkDJIyYgdTkcktA5pqw7Uv/L2V1Pxp7CaQtsoCSB5KWK0DNAWoeULlc6Z6EX1RFO9o=",preset:"ant"}),S,e(c,{id:"69",data:[{id:"服务端"},{id:"客户端"}]},{title0:r(({value:l,isActive:a})=>[i("服务端")]),title1:r(({value:l,isActive:a})=>[i("客户端")]),tab0:r(({value:l,isActive:a})=>[f]),tab1:r(({value:l,isActive:a})=>[w]),_:1}),x,e(o,{id:"flowchart-105",code:"eJxLzs9LMTLSSMzJTM/TzUutKLHNy9e0tQMJZ5Zk5udZKbyc0/BiWaNCUWpiCld+QYmRka1dfkFqUSJE9sX63U/7pz2buuFZ7zqu4tIkWzsgUZRfWpKZl2ql8HRJy/MJbU92zHratfD9no7nu/Y/X9H9bOOC93s6ubigVlemFusUZaZnlGjqAg0Gmq8B4wFN4gIAF/BHHw==",preset:"ant"}),U])}const J=p(y,[["render",N],["__file","network-model.html.vue"]]),H=JSON.parse('{"path":"/zh/dev-rpc-thrift/network-model.html","title":"Thrift 网络模型 (java)","lang":"zh-CN","frontmatter":{"title":"Thrift 网络模型 (java)","date":"2024-04-06T00:00:00.000Z","tag":["thrift"],"order":4,"gitInclude":["../../../code/demo-thrift/thrift-server/src/main/java/org/example/service/SimpleService.java","../../../code/demo-thrift/thrift-client/src/main/java/org/example/client/SimpleClient.java","../../../code/demo-thrift/thrift-server/src/main/java/org/example/service/NonblockingService.java","../../../code/demo-thrift/thrift-client/src/main/java/org/example/client/NonblockingClient.java"],"description":"从驱动形式上，Thrift 提供的网络服务模型分为：单线程、多线程、时间驱动。 从另一个角度分为：阻塞服务模型、非阻塞服务模型。 阻塞服务模型： TSimpleServer, TThreadPoolServer 非阻塞服务模型： TNonblockingServer, THsHaServer, TThreadedSelectorServer 下面以 J...","head":[["meta",{"property":"og:url","content":"https://lawsssscat.github.io/blog/zh/blog/zh/dev-rpc-thrift/network-model.html"}],["meta",{"property":"og:site_name","content":"个人博客"}],["meta",{"property":"og:title","content":"Thrift 网络模型 (java)"}],["meta",{"property":"og:description","content":"从驱动形式上，Thrift 提供的网络服务模型分为：单线程、多线程、时间驱动。 从另一个角度分为：阻塞服务模型、非阻塞服务模型。 阻塞服务模型： TSimpleServer, TThreadPoolServer 非阻塞服务模型： TNonblockingServer, THsHaServer, TThreadedSelectorServer 下面以 J..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-14T05:17:52.000Z"}],["meta",{"property":"article:author","content":"Steven"}],["meta",{"property":"article:tag","content":"thrift"}],["meta",{"property":"article:published_time","content":"2024-04-06T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-04-14T05:17:52.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Thrift 网络模型 (java)\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-04-06T00:00:00.000Z\\",\\"dateModified\\":\\"2024-04-14T05:17:52.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Steven\\",\\"url\\":\\"https://github.com/LawssssCat/\\"}]}"]]},"headers":[{"level":2,"title":"TSimpleServer","slug":"tsimpleserver","link":"#tsimpleserver","children":[]},{"level":2,"title":"TThreadPoolServer","slug":"tthreadpoolserver","link":"#tthreadpoolserver","children":[]},{"level":2,"title":"TNonblockingServer","slug":"tnonblockingserver","link":"#tnonblockingserver","children":[]},{"level":2,"title":"THsHaServer","slug":"thshaserver","link":"#thshaserver","children":[]},{"level":2,"title":"TThreadedSelectorServer","slug":"tthreadedselectorserver","link":"#tthreadedselectorserver","children":[]}],"git":{"createdTime":1712320147000,"updatedTime":1713071872000,"contributors":[{"name":"lawsssscat","email":"18041500+LawssssCat@users.noreply.github.com","commits":5}]},"readingTime":{"minutes":4.99,"words":1497},"filePathRelative":"zh/dev-rpc-thrift/network-model.md","localizedDate":"2024年4月6日","excerpt":"<p>从驱动形式上，Thrift 提供的网络服务模型分为：单线程、多线程、时间驱动。</p>\\n<p>从另一个角度分为：阻塞服务模型、非阻塞服务模型。</p>\\n<ul>\\n<li>阻塞服务模型： TSimpleServer, TThreadPoolServer</li>\\n<li>非阻塞服务模型： TNonblockingServer, THsHaServer, TThreadedSelectorServer</li>\\n</ul>\\n<p>下面以 Java 开发的角度分析各种网络服务模型的使用场景、性能情况。</p>\\n","autoDesc":true}');export{J as comp,H as data};
